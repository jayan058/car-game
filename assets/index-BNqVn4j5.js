(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();const H=document.getElementById("homeScreen"),B=document.getElementById("gameScreen"),b=document.getElementById("gameOverScreen"),j=document.getElementById("gameControls"),y=new Audio;y.src="../assets/audio/introsong.mp3";y.loop=!0;function P(){H.style.display="flex",B.style.display="none",b.style.display="none"}function W(){y.pause(),H.style.display="none",B.style.display="flex",b.style.display="none"}function K(){y.play(),B.style.display="none",b.style.display="flex"}function z(){j.style.display="flex"}function J(){y.pause(),K()}const L=document.getElementById("gameCanvas"),p=L.getContext("2d"),c=[];function k(){const e=L.width/h,D={x:Math.floor(Math.random()*h)*e+e/2-25,y:-70,width:50,height:90,speed:8,image:null};c.push(D)}function M(){for(const e of c)if(e.y+=e.speed,e.y>L.height){const t=c.indexOf(e);t!==-1&&(c.splice(t,1),N())}}const A=["../assets/images/1.png","../assets/images/2.png","../assets/images/3.png","../assets/images/4.png","../assets/images/5.png","../assets/images/6.png","../assets/images/7.png","../assets/images/8.png","../assets/images/9.png","../assets/images/10.png"];function Q(){const e=Math.floor(Math.random()*A.length);return A[e]}function G(){for(const e of c)if(e.image)p.fillStyle="rgb(150, 150, 150)",p.drawImage(e.image,e.x,e.y,e.width,e.height);else{const t=Q(),i=new Image;i.src=t,i.onload=()=>{p.fillStyle="rgb(150, 150, 150)",p.drawImage(i,e.x,e.y,e.width,e.height),e.image=i}}}function U(){c.length=0}const g=[];function V(e,t,i){const u={x:e+i/2-2.5,y:t,width:5,height:15,speed:10};g.push(u)}function Y(e){g.forEach(t=>{t.y-=t.speed*e/10})}function R(e){e.fillStyle="red",g.forEach(t=>{e.fillRect(t.x,t.y,t.width,t.height)})}function Z(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function _(e,t){for(const i of t)if(Z(e,i))return!0;return!1}function ee(){for(let e=c.length-1;e>=0;e--){const t=c[e];for(let i=g.length-1;i>=0;i--){const l=g[i];if(l.x<t.x+t.width&&l.x+l.width>t.x&&l.y<t.y+t.height&&l.y+l.height>t.y){g.splice(i,1),c.splice(e,1);const s=new Audio;s.src="../assets/audio/enemyhit.wav",s.play(),N();break}}}}const v=new Audio;v.src="../assets/audio/carenginegoing.wav";v.loop=!0;let I=0,T=0,m=10,C=!1,E=0;const h=4,d=document.getElementById("gameCanvas"),o=d.getContext("2d"),r=d.width/h;let n={x:r*1+r/2-25,y:d.height-70,width:50,height:90,speed:5,dx:0,dy:0,targetX:r*1+r/2-25},w=0,S,f;function X(){te(),ne()}function te(){v.play(),I=0,T=0,m=10,C=!1,n.x=r*1+r/2-n.width/2,n.y=d.height-n.height-10,n.targetX=n.x,U(),clearTimeout(E),k(),G(),M(),w=0,F(),q()}function ne(){f=new Image,f.onload=()=>{S=requestAnimationFrame($)},f.src="../assets/images/cars.webp"}function $(e){const t=e-w;if(w=e,F(),q(),oe(t),Y(t),R(o),o.font="35px Arial",o.fillStyle="black",o.fillText(`Score:${T}`,2,50),o.fillText(`Bullets:${m}`,2,100),C&&re(),!_(n,c))S=requestAnimationFrame($);else{w=0,cancelAnimationFrame(S),v.pause();const i=new Audio;i.src="../assets/audio/collidewithcar.wav",i.play(),setTimeout(J,2e3)}ee()}function F(){o.clearRect(0,0,d.width,d.height),ie(),se(),G(),M(),R(o)}function ie(){o.strokeStyle="yellow",o.lineWidth=2;for(let e=1;e<h;e++)o.beginPath(),o.moveTo(e*r,0),o.lineTo(e*r,d.height),o.stroke()}function se(){o.fillStyle="white",I+=n.speed;for(let l=0;l<h;l++){const s=l*r+r/2-5;for(let a=-200+I%230;a<d.height;a+=230)o.fillRect(s,a,10,200)}}function q(){f&&o.drawImage(f,215,120,122,258,n.x,n.y,n.width,n.height)}function oe(e){const t=n.speed*e/10,i=Math.sign(n.targetX-n.x);n.x+=i*Math.min(t,Math.abs(n.targetX-n.x))}function O(e){const t=Math.floor(n.x/r);e==="left"&&t>0?n.targetX=(t-1)*r+r/2-n.width/2:e==="right"&&t<h-1&&(n.targetX=(t+1)*r+r/2-n.width/2)}document.addEventListener("keydown",e=>{e.code==="Space"&&(m>0&&V(n.x,n.y,n.width),ae())});function N(){T++}function ae(){m>0?m--:(C=!0,clearTimeout(E),E=setTimeout(le,6e3))}function le(){m=10,C=!1}function re(){o.font="35px Arial",o.fillStyle="black",o.fillText("Reloading Bullets.....",d.width/2-150,50)}function ce(e){e.key==="ArrowRight"||e.key==="Right"?O("right"):(e.key==="ArrowLeft"||e.key==="Left")&&O("left")}function de(){document.addEventListener("keydown",ce)}const ue=document.getElementById("startButton"),ge=document.getElementById("restartButton"),me=document.getElementById("backToHomePage"),he=document.getElementById("gameControls");let x;ue.addEventListener("click",()=>{W(),X(),clearInterval(x),x=setInterval(k,500)});ge.addEventListener("click",()=>{clearInterval(x),W(),X(),x=setInterval(k,500)});me.addEventListener("click",()=>{P()});he.addEventListener("click",()=>{z()});P();de();
